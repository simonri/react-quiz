<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Filing Findings</title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
    integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://unpkg.com/simplebar@latest/dist/simplebar.css" />
  <script src="https://unpkg.com/simplebar@latest/dist/simplebar.min.js"></script>
  <link rel="stylesheet" href="/static/css/boostrap.css" />
  <link rel="stylesheet" href="/static/css/main.css" />
  <link rel="icon" type="image/png" href="/static/images/filling/tab_icon.png" sizes="32x32">
  <style>
    .bold {
      font-weight: bold !important;
    }

    .active_link {
      background-color: #6a0008 !important;
      color: #ddd !important;
    }

    .active_link:active {
      background-color: #6a0008 !important;
      color: #ddd !important;
    }

    .active_link:focus {
      background-color: #6a0008 !important;
      color: #ddd !important;
    }
  </style>
</head>

<body>
  <!-- navbar -->
  <div class="navbar navbar-default mb-0 fixed_nav" style="z-index: 1000;" role="navigation">
    <div class="container-fluid limited">
      <div class="navbar-header">
        <a class="navbar-brand" href="/">
          <img src="/static/images/filling/title_icon.png" class="title-logo" />
          FilingFindings™
        </a>
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span><span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <div class="collapse navbar-collapse anonymous-navbar-collapse" id="navbar-collapse">
        <div id="entity-search-form-container" data-style-variant="navbar" data-initial-value="" data-autofocus="true">
          <form class=" navbar-form focus" action="/result" method="get" spellcheck="false" role="search">
            <div class="input-group">
              <input type="search" class="form-control search-autocomplete" name="ticker" size="40"
                placeholder="Ticker or company name" autocomplete="off" autocorrect="off" autocapitalize="off"
                autofocus="" /><span class="input-group-btn"><button class="btn btn-default" type="submit">
                  <img src="/static/images/icons/red-5.png"
                    style="width:16px;height:17px;padding:0;margin:0;" /></button></span>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <main class="filing_main">
    <section class="settings">
      <div class="settings_item dropdown-container">
        <!-- <h3>DETAILS</h3>

          <div class="form-group" style="display:none">
            <label for="select">DETAILS</label>
            <select class="form-control" id="select">
              <option value="pnn">Positive/Negative/Neutral</option>
              <option value="important">Important</option>
              <option value="positive">Positive Only</option>
              <option value="negative">Negative Only</option>
              <option value="neutral">Neutral Only</option>
              <option value="hidden">Hidden</option>
              <option value="redflags">Red Flags</option>
              <option value="unusualactivity">Unusual Activity</option>
              <option value="significantchanges">Significant Changes</option>
              <option disabled="disabled">──────────────────</option>
              <option value="industrycomparisons">Industry Comparisons</option>
              <option value="companystructure">Company Structure</option>
              <option value="keystats">Key Stats</option>
              <option value="trends">Trends</option>
              <option value="ratios">Ratios</option>
              <option value="forecasts">Forecasts</option>
            </select>
          </div> -->

        <div class="dropdown-back">
          <!-- <div class="dropdown">
            <div id="ddbtn" class="dropbtn btn btn-default" data-value="val1">
              Positive/Negative/Neutral <i class="fas fa-sort-down"></i>
            </div>


            <div id="ddmenu" class="dropdown-content">
              <p>Findings</p>
              <a href="javascript:;" class="dd_item" data-value="pnn">Positive/Negative/Neutral</a>
              <a href="javascript:;" class="dd_item itemInfo" data-value="important" aria-label="Display information found that is significant or critical to the company">Important</a>
              <a href="javascript:;" class="dd_item itemInfo" data-value="positive" aria-label="Display Positive information found including strengths and efficencies">Positive Only</a>
              <a href="javascript:;" class="dd_item itemInfo" data-value="negative" aria-label="Display Negative information found including weaknesses and deficiencies">Negative Only</a>
              <a href="javascript:;" class="dd_item itemInfo" data-value="neutral" aria-label="Display Neutral information found">Neutral Only</a>
              <a href="javascript:;" class="dd_item itemInfo" data-value="hidden" aria-label="Display information that the company is not directly addressing or may be trying to hide">Hidden</a>
              <a href="javascript:;" class="dd_item itemInfo" data-value="redflags" aria-label="Display Red Flags found in the report">Red Flags</a>
              <a href="javascript:;" class="dd_item itemInfo" data-value="unusualactivity" aria-label="Display any information that is bizarre or perplexed within the company">Unusual Activity</a>
              <a href="javascript:;" class="dd_item itemInfo" data-value="deception&fraud" aria-label="Display any unethical indicators within the report inclduing shady accounting, earnings manipulation, and 15 types of fraud">Deception & Fraud</a>
              <a href="javascript:;" class="dd_item itemInfo" data-value="significantchanges" aria-label="Display information that changed that is worthy of attention">Significant Changes</a>
              <a href="javascript:;" class="dd_item itemInfo" data-value="comparedtocompetitors" aria-label="Compares information in the company's report with data from the reports of its industry peers">Compared to Competitors</a>

              <p>Calculations</p>
              <a href="javascript:;" class="dd_item itemInfo" data-value="forecasts" aria-label="Predicts the company's direction based upon 16 forecasting models calculauted using information from the report">Forecasts</a>
              <a href="javascript:;" class="dd_item itemInfo" data-value="ratios" aria-label="Calculuates and lists generic financial ratios">Ratios</a>
              <a href="javascript:;" class="dd_item itemInfo" data-value="managment" aria-label="Shows where the company's disperses its accounts">Management</a>
              <a href="javascript:;" class="dd_item itemInfo" data-value="financialstatements" aria-label="Identifies and lists the financial statements">Financial Statements</a>
              <a href="javascript:;" class="dd_item itemInfo" data-value="industry" aria-label="Ranking -Displays information assessed and compared to the statistics of the company's peers">Industry Ranking</a>
              
              <p>Condition</p> -->
          <!-- !!!!!!!!!!!!!!!!! -->
          <!-- NOTE:: These have NO FUNCTION yet. Remove "dis" class when they are configured -->
          <!-- !!!!!!!!!!!!!!!!! -->
          <!-- <a href="javascript:;" class="dd_item itemInfo dis" data-value="" aria-label="">Sales</a>
              <a href="javascript:;" class="dd_item itemInfo dis" data-value="" aria-label="">Debt</a>
              <a href="javascript:;" class="dd_item itemInfo dis" data-value="" aria-label="">Cash Flow</a>
              <a href="javascript:;" class="dd_item itemInfo dis" data-value="" aria-label="">Profitability</a>
              <a href="javascript:;" class="dd_item itemInfo dis" data-value="" aria-label="">Leverage</a>
              <a href="javascript:;" class="dd_item itemInfo dis" data-value="" aria-label="">Valuation</a>
              <a href="javascript:;" class="dd_item itemInfo dis" data-value="" aria-label="">Liquidity</a>
              <a href="javascript:;" class="dd_item itemInfo dis" data-value="" aria-label="">Efficiency</a>
              <a href="javascript:;" class="dd_item itemInfo dis" data-value="" aria-label="">Capital Structure</a>

              <p>Other</p>
              <a href="javascript:;" class="dd_item itemInfo" data-value="guruanalysis" aria-label="Quality checklists from iconic investors">Guru Analysis</a>
              <a href="javascript:;" class="dd_item itemInfo" data-value="impact" aria-label="Information that matters to the company's investors, creditors, suppliers, government agencies, and insiders">Impact</a>
            </div>
          </div> -->
          <button id="back" class="btn btn-default" onclick="window.history.back()"><i class="fas fa-chevron-left"></i>
            BACK</button>
        </div>


      </div>

      <div class="settings_item settings-options">
        <div class="checkbox checkbox-primary">
          <input class="display_control" id="findings" type="checkbox" checked />
          <label for="findings">Display Findings</label>
        </div>

        <div class="checkbox checkbox-primary">
          <input class="display_control" id="annotations" type="checkbox" checked />
          <label for="annotations">Display Annotations</label>
        </div>

        <div class="checkbox checkbox-primary">
          <input class="display_control" id="Underline" type="checkbox" checked />
          <label for="Underline">Underline/Box Text</label>
        </div>
      </div>

      <button class="settingsBtn btn btn-lg"><i id="toggler" class="fas fa-chevron-up"></i></button>
    </section>

    <section class="filing">
      <div class="left_panel">
        <!-- <div class="left_panel_item important_div d-none"><p>Important</p></div>
          <div class="left_panel_item positive_div"><p>Positive</p></div>
          <div class="left_panel_item negative_div"><p>Negative</p></div>
          <div class="left_panel_item neutral_div"><p>Neutral</p></div>
          <div class="left_panel_item hidden_div d-none"><p>Hidden</p></div>
          <div class="left_panel_item redflags_div d-none"><p>Red Flags</p></div>
          <div class="left_panel_item deception&fraud_div d-none"><p>Deception & Fraud</p></div>
          <div class="left_panel_item unusualactivity_div d-none"><p>Unusual Activity</p></div>
          <div class="left_panel_item significantchanges_div d-none"><p>Significant Changes</p></div>
          <div class="left_panel_item comparedtocompetitors_div d-none"><p>Compared to Competitors</p></div>
          <div class="left_panel_item forecasts_div d-none"><p>Forecasts</p></div>
          <div class="left_panel_item industry_div d-none"><p>Industry</p></div>
          <div class="left_panel_item managment_div d-none"><p>Managment</p></div>
          <div class="left_panel_item financialstatements_div d-none"><p>Financial Statements</p></div>
          <div class="left_panel_item ratios_div d-none"><p>Ratios</p></div>
          <div class="left_panel_item performance_div d-none"><p>Performance</p></div>
          <div class="left_panel_item guruanalysis_div d-none"><p>Guru Analysis</p></div>
          <div class="left_panel_item impact_div d-none"><p>Impact</p></div> -->
      </div>

      <div class="content"><%- body %></div>
      <div class="right_panel"></div>
    </section>

  </main>


  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

  <!-- check if it is Authorized -->
  <% if (locals.response != 'Unauthorized') { %>
  <script>
    /*
    Prove that it works...
    console.log('<%- financialsData %>');
    */
  </script>
  <script src="/static/js/filing.js"></script>
  <script src="/rules.js"></script>
  <script src="/static/js/rules_do.js"></script>
  <script src="/static/js/paragraphGrouper_v2.js"></script>
  <% } %>

  <script>
    const settings = document.querySelector(".settings");
    const content = document.querySelector(".content");
    const left_panel = document.querySelector(".left_panel");
    const right_panel = document.querySelector(".right_panel");
    const select = document.querySelector("#select");

    let settings_status = "shown";

    // other variables
    let content_width = 52;
    let left_panel_width = 24;
    let right_panel_width = 24;

    // Settings button
    document.querySelector(".settingsBtn").addEventListener("click", e => {
      const toggler = document.getElementById("toggler");

      if (settings_status == "shown") {
        settings.style.height = "5px";
        settings.style.padding = "20px";
        // content.style.height = '805px';
        toggler.classList.remove("fa-chevron-up");
        toggler.classList.add("fa-chevron-down");
        settings_status = "hidden";

        // added for static content
        document.querySelector(".left_panel").style.top = "9.4vh";
        document.querySelector(".right_panel").style.top = "9.4vh";
        document.querySelector(".content").style.top = "9.4vh";

        document.querySelectorAll(".settings_item").forEach(item => {
          item.classList.add("d-none");
        });
      } else if (settings_status == "hidden") {
        settings.style.height = "120px";
        settings.style.padding = "10px";
        // content.style.height = '728px';
        toggler.classList.add("fa-chevron-up");
        toggler.classList.remove("fa-chevron-down");
        settings_status = "shown";

        // added for static content
        document.querySelector(".left_panel").style.top = "17.8vh";
        document.querySelector(".right_panel").style.top = "17.8vh";
        document.querySelector(".content").style.top = "17.8vh";

        setTimeout(() => {
          document.querySelectorAll(".settings_item").forEach(item => {
            item.classList.remove("d-none");
          });
        }, 350);
      }
    });


    // Dropdown button
    const ddbtn = document.getElementById('ddbtn');
    if (ddbtn) {
      ddbtn.addEventListener('click', e => {
        document.getElementById("ddmenu").classList.toggle("show");
      });

    }

    // per element handler
    document.querySelectorAll('.dd_item:not(.dis)').forEach(item => {
      item.addEventListener('click', e => {
        ddbtn.innerHTML = `<span class="ddtitle">${item.innerHTML}</span> <i class="fas fa-sort-down"></i>`;
        ddbtn.setAttribute('data-value', item.getAttribute('data-value'))

        const value = ddbtn.getAttribute('data-value');

        switch (value) {
          case "pnn": {
            document.querySelectorAll(".left_panel_item").forEach(ele => {
              ele.classList.add("d-none");
            });

            document.querySelector(".positive_div").classList.remove("d-none");
            document.querySelector(".positive_div").style.height = "32%";
            document.querySelector(".negative_div").classList.remove("d-none");
            document.querySelector(".negative_div").style.height = "32%";
            document.querySelector(".neutral_div").classList.remove("d-none");
            document.querySelector(".neutral_div").style.height = "32%";
          } break;

          default: {
            document.querySelectorAll(".left_panel_item").forEach(ele => {
              if (ele.classList[1] == `${value}_div`) {
                ele.classList.remove("d-none");
                ele.style.height = "98%";
              } else {
                ele.classList.add("d-none");
              }
            });
          }
        }
      });
    })

    // Close the dropdown menu if the user clicks outside of it
    window.onclick = function (event) {
      if (!event.target.matches(".dropbtn")) {
        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains("show")) {
            openDropdown.classList.remove("show");
          }
        }
      }
    };

    // Select button
    if (select) {
      select.addEventListener("change", e => {

        if (e.target.value == "pnn") {
          document.querySelectorAll(".left_panel_item").forEach(ele => {
            ele.classList.add("d-none");
          });

          document.querySelector(".positive_div").classList.remove("d-none");
          document.querySelector(".positive_div").style.height = "32%";
          document.querySelector(".negative_div").classList.remove("d-none");
          document.querySelector(".negative_div").style.height = "32%";
          document.querySelector(".neutral_div").classList.remove("d-none");
          document.querySelector(".neutral_div").style.height = "32%";

          return;
        }

        document.querySelectorAll(".left_panel_item").forEach(ele => {
          if (ele.classList[1] == `${e.target.value}_div`) {
            ele.classList.remove("d-none");
            ele.style.height = "98%";
          } else {
            ele.classList.add("d-none");
          }
        });
      });
    }


    // Display control
    document.querySelectorAll(".display_control").forEach(ele => {
      ele.addEventListener("change", e => {
        if (e.target.checked == true) {
          // Display
          switch (e.target.id) {
            case "findings":
              // if (select.value == "pnn") {
              //   document.querySelector(".positive_div").classList.remove("d-none");
              //   document.querySelector(".negative_div").classList.remove("d-none");
              //   document.querySelector(".neutral_div").classList.remove("d-none");
              // } else {
              //   document.querySelector(`.${select.value}_div`).classList.remove("d-none");
              // }

              left_panel_width = 24;
              left_panel.style.width = `${left_panel_width}%`;
              content.style.left = `${left_panel_width}%`;
              content.style.width = `${100 - left_panel_width - right_panel_width}%`;
              break;
            case "annotations":
              right_panel_width = 24;
              right_panel.style.width = `${right_panel_width}%`;
              content.style.width = `${100 -
                left_panel_width -
                right_panel_width}%`;
              break;
          }
        } else {
          // Hide
          switch (e.target.id) {
            case "findings":
              document.querySelectorAll(".left_panel_item").forEach(ele => {
                ele.classList.add("d-none");
              });

              left_panel_width = 1;
              left_panel.style.width = `${left_panel_width}%`;
              content.style.left = `${left_panel_width}%`;
              content.style.width = `${100 - left_panel_width - right_panel_width}%`;
              break;
            case "annotations":
              right_panel_width = 1;
              right_panel.style.width = `${right_panel_width}%`;
              content.style.width = `${100 - left_panel_width - right_panel_width}%`;
              break;
          }
        }
      });
    });

  </script>
</body>

</html>